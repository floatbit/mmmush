(()=>{"use strict";var e,t={996:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(o=a.key,i=void 0,i=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,r||"default");if("object"!==e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(o,"string"),"symbol"===e(i)?i:String(i)),a)}var o,i}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=document.getElementById("chat-form"),this.messagesContainer=document.getElementById("chat-messages"),this.messageInput=document.getElementById("message-input"),this.ajaxUrl="/wp-admin/admin-ajax.php",this.init()}var r,n,a;return r=e,(n=[{key:"init",value:function(){var e=this;this.form.addEventListener("submit",(function(t){t.preventDefault(),e.sendMessage()}))}},{key:"sendMessage",value:function(){var e=this,t=new FormData(this.form),r=t.get("ThreadId"),n=t.get("AssistantId"),a=t.get("message"),o=document.createElement("div");o.className="message user",o.textContent=a,this.messagesContainer.appendChild(o),fetch(this.ajaxUrl,{method:"POST",body:new URLSearchParams({action:"send_message",ThreadId:r,AssistantId:n,message:a}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){if(!t.ok)throw new Error("Network response was not ok");e.handleStream(t.body)})).catch((function(e){console.error("Error:",e)}))}},{key:"handleStream",value:function(e){var t=e.getReader(),r=new TextDecoder;t.read().then(function e(n){var a=n.done,o=n.value;if(!a){var i=r.decode(o,{stream:!0}),s=JSON.parse(i.replace("data: ","").trim()).message;return this.typeWriterEffect(s),t.read().then(e.bind(this))}}.bind(this))}},{key:"typeWriterEffect",value:function(e){var t=document.createElement("div");t.className="message assistant",this.messagesContainer.appendChild(t);var r=0;!function n(){r<e.length&&(t.innerHTML+=e.charAt(r),r++,setTimeout(n,50))}()}}])&&t(r.prototype,n),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),e}();$,document.querySelector(".single-thread")&&new r},646:()=>{},38:()=>{}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,n),o.exports}n.m=t,e=[],n.O=(t,r,a,o)=>{if(!r){var i=1/0;for(l=0;l<e.length;l++){for(var[r,a,o]=e[l],s=!0,u=0;u<r.length;u++)(!1&o||i>=o)&&Object.keys(n.O).every((e=>n.O[e](r[u])))?r.splice(u--,1):(s=!1,o<i&&(i=o));if(s){e.splice(l--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[r,a,o]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={532:0,298:0,367:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var a,o,[i,s,u]=r,c=0;if(i.some((t=>0!==e[t]))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)var l=u(n)}for(t&&t(r);c<i.length;c++)o=i[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(l)},r=self.webpackChunkkudos_starter_theme=self.webpackChunkkudos_starter_theme||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.O(void 0,[298,367],(()=>n(996))),n.O(void 0,[298,367],(()=>n(646)));var a=n.O(void 0,[298,367],(()=>n(38)));a=n.O(a)})();